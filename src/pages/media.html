<!-- @layout:base -->
<!-- @title:Media Library - CMS Pro -->

<div class="container mt-4">
  <div class="row">
    <div class="col-md-12">
      <h1>Media Library</h1>
      <p>Manage your image files</p>

      <div class="mb-4">
        <button id="uploadImageBtn" class="btn btn-primary">
          Upload New Image
        </button>
      </div>

      <div class="row" id="mediaContainer">
        <!-- Media items will be inserted here dynamically -->
        {{mediaHtml}}
      </div>
    </div>
  </div>
</div>

<!-- Upload Image Modal -->
<div class="modal fade" id="uploadImageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Upload New Image</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form id="uploadImageForm" enctype="multipart/form-data">
          <div class="mb-3">
            <label for="imageFile" class="form-label">Select Image</label>
            <input
              type="file"
              class="form-control"
              id="imageFile"
              name="image"
              accept="image/*"
              required
            />
          </div>
          <div class="mb-3">
            <label for="imageDescription" class="form-label"
              >Description (optional)</label
            >
            <textarea
              class="form-control"
              id="imageDescription"
              name="description"
              rows="2"
            ></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" id="saveImageBtn" class="btn btn-primary">
          Upload Image
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Image Confirmation Modal -->
<div class="modal fade" id="deleteImageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Delete Image</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p>
          Are you sure you want to delete this image? This action cannot be
          undone.
        </p>
        <!-- Hidden meta tag for image ID -->
        <meta id="image-id-to-delete" name="image-id-to-delete" content="" />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" id="confirmDeleteImageBtn" class="btn btn-danger">
          Delete Image
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Image Preview Modal -->
<div class="modal fade" id="imagePreviewModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Image Preview</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body text-center">
        <img id="previewImage" src="" alt="Preview" class="img-fluid" />
        <p id="previewDescription" class="mt-2"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button type="button" id="copyImageUrlBtn" class="btn btn-primary">
          Copy URL
        </button>
      </div>
    </div>
  </div>
</div>
